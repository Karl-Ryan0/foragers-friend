{% extends "base.html" %}

{% block title %}Add Item | My Site{% endblock %}

{% block content %}
<h2>Add New Item</h2>
<!-- Check if User is Authenticated -->
{% if user.is_authenticated %}
<form method="post" action="{% url 'add_item' %}">
    {% csrf_token %}
    {{ form.as_p }}

    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% else %}
<!-- Message Displayed if User is Not Logged In -->
<p>You must be logged in to add a new item.</p>
{% endif %}

<!-- JavaScript to Populate Latitude and Longitude Fields -->
<script>
    const urlParams = new URLSearchParams(window.location.search);
    document.querySelector('#id_latitude').value = urlParams.get('latitude');
    document.querySelector('#id_longitude').value = urlParams.get('longitude');
</script>

{% endblock %}


